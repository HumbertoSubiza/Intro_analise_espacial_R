---
title: "Terra_SpatRaster1"
author: "Walter Humberto Subiza Piña"
date: "2023-07-14"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo      = TRUE, 
                      warning   = FALSE, 
                      message   = FALSE, 
                      fig.path  = paste0(getwd(), "/figuras/"), 
                      fig.ext   = 'png',
                      fig.align = 'center')
```



```{r libraries}
library(terra)
```


### 1- Clase SpatRaster

Direccionamiento para la pasta donde se encuentran los datos.


```{r camino}
cam <- ("C:/Users/Administrador/Documents/R/Intro_analise_espacial_R/exercicios/data")

```


Cargar un archivo del tipo tif de la base de datos de SRTM, agregamos a la dirección el nombre del archivo de datos y luego se carga con _rast_. A continuación generamos la imagen y vemos la clase del nuevo archivo.

```{r intro1}
# camino + nombre del archivo 
f1<- (paste(cam,"srtm_26_19.tif",sep = "/"))
# cargar el archivo
r1 <- rast(f1) 
# imagen
plot(r1)
# clase
class(r1)
```

Para verificar la extensión de los datos cargados y la resolución espacial:

```{r intro2}
ext(r1)
res(r1)
# primeras cuatro lineas del objeto
head(r1,4)
```

Cargamos otro archivo semejante

```{r intro3}
# camino + nombre del archivo 
f2<- (paste(cam,"srtm_26_18.tif",sep = "/"))
# cargar el archivo
r2 <- rast(f2) 
# imagen
plot(r2)

```


Podemos unir los dos archivos, que tienen el mismo SGR y resolución, usando el método _merge_. A su vez podemos ver las estadísticas del archivo final con _summary_.

```{r intro4}
# unión de los archivos
x <-merge(r1,r2)
plot(x)
summary(x)
```

Los archivos cargados y unidos están en coordenadas geográficas, podemos proyectarlo para un sistema plano como UTM, de la siguiente forma:


```{r intro5}
nuevo_crs <- "+proj=utm +zone=22 +south +datum=WGS84 +units=m +no_defs +type=crs"
x_2<- project(x, nuevo_crs)
```


```{r}
crs(x_2, proj=TRUE)
res(x_2)
plot(x_2)
summary(x_2)
```


```{r}
# camino + nombre del archivo Landsat
f3<- (paste(cam,"landsat.tif",sep = "/"))
# cargar el archivo
r3 <- rast(f3) 
# imagen
plot(r3)
```



```{r}
res(r3)
nlyr(r3)
names(r3)
plotRGB(r3, r=1, g=2, b=3, a=NULL, colNA="white",stretch="lin", smooth=TRUE, axes=TRUE)
```

```{r}
# camino + nombre del archivo 
f4<- (paste(cam,"sent_20230716.jp2",sep = "/"))
# cargar el archivo
r4 <- rast(f4) 
# imagen
plot(r4)
```



```{r}
crs(r4, proj=TRUE)
ext(r4)
res(r4)
nlyr(r4)
names(r4)
head(r4)
```

